<!--
  Generated template for the CreateQuotesPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="gongdan-color" hideBackButton="true">
      <ion-buttons left>
          <button ion-button icon-only (click)="goBack()">
            <ion-icon ios="ios-arrow-back" md="md-arrow-back"></ion-icon>
          </button>
        </ion-buttons>
    <ion-title>创建报价单</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-item (click)="seleteCustomer()">
    <ion-label>客户
      <span style="color:red;"> *</span>
    </ion-label>
    <ion-label item-end text-right>{{customerName}}</ion-label>
  </ion-item>


  <ion-item>
    <ion-label>交货规则
      <span style="color:red;"> *</span> </ion-label>
    <ion-select [(ngModel)]="deliveryRuls">
      <ion-option *ngFor="let item of deliveryRulsList;" value={{item[0]}}>{{item[1]}}</ion-option>
    </ion-select>
  </ion-item>



  <ion-item>
    <ion-label>税率
      <span style="color:red;"> *</span> </ion-label>
    <ion-select [(ngModel)]="tax">
      <ion-option *ngFor="let item of taxList;" value={{item.id}}>{{item.name}}</ion-option>
    </ion-select>
  </ion-item>


  <ion-item>
    <ion-label>请选择交货日期
      <span style="color:red;"> *</span> </ion-label>
    <ion-datetime displayFormat="DDD DD.MM.YYYY" min="2017" max="2020" [(ngModel)]="seleteDate"></ion-datetime>
  </ion-item>


  <!-- <ion-item>
    <ion-label>价格表</ion-label>
    <span style="color:red;"> *</span>
    <ion-select [(ngModel)]="priceForm">
      <ion-option *ngFor="let item of priceFormList;" value={{item.id}}>{{item.name}}</ion-option>
    </ion-select>
  </ion-item> -->


  <ion-label style="color:blue;text-align:center" (click)="improveQuotation()">
    完善报价单信息 <span style="color:red;"> *</span>
  </ion-label>

  <ion-list lines>
    <ion-item-sliding *ngFor='let detail of items;let i  = index' >
      <ion-item >
        <h2 text-wrap>产品 {{i+1}} {{detail.name}}</h2>
        <p text-wrap> 国内简称 {{detail.inner_spec}}</p>
        <p text-wrap>国内型号 {{detail.inner_code}}</p>
        <p>计量单位 {{detail.uom}}</p>
        <p>订购： {{detail.orderNumber}} * {{detail.orderPrice}}</p>
        <p>小计 ￥{{detail.orderNumber * detail.orderPrice}}</p>
      </ion-item>
      <ion-item-options side="right">
        <button ion-button color="primary" (click)="changeProductItem(i)">
            <ion-icon name="create"></ion-icon>
            修改
          </button>
        <button ion-button color="primary" (click)="deleteProductItem(i)">
              <ion-icon name="trash"></ion-icon>
              删除
            </button>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

  <ion-item-divider class="divider" color="light"></ion-item-divider>
  <ion-label style="color:blue;text-align:center" (click)="addProductions()">
    + 添加产品
  </ion-label>

</ion-content>

<ion-footer style="background:gainsboro">
  <ion-toolbar>
    <button ion-button full (click)="save()"> 保存</button>
  </ion-toolbar>
</ion-footer>
