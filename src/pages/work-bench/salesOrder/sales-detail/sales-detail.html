<!--
  Generated template for the SalesDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{item.name}}</ion-title>
    <ion-buttons end>
      <button ion-button icon-only tappable (click)="presentPopover($event)">
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-item-group>
    <ion-item-divider color="light"></ion-item-divider>
    <ion-list-header> 订单信息</ion-list-header>
    <ion-item>
      <ion-label style="font-size:85%;font-weight:bold">客户</ion-label>
      <ion-label text-wrap item-end style="font-size:65%;text-align:right;">{{item.customer}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label style="font-size:85%;font-weight:bold">交货日期</ion-label>
      <ion-label item-end style="font-size:65%;text-align:right;">{{item.validity_date}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label style="font-size:85%;font-weight:bold">PI号码</ion-label>
      <ion-label item-end style="font-size:65%;text-align:right;">{{item.pi_number}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label style="font-size:85%;font-weight:bold">交货规则</ion-label>
      <ion-label item-end style="font-size:65%;text-align:right;" *ngIf="item.delivery_rule">{{item.delivery_rule[1]}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label style="font-size:85%;font-weight:bold">未含税金额</ion-label>
      <ion-label item-end style="font-size:65%;text-align:right;">{{item.amount_untaxed}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label style="font-size:85%;font-weight:bold">税金</ion-label>
      <ion-label item-end style="font-size:65%;text-align:right;">{{item.amount_tax}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label style="font-size:85%;font-weight:bold">总计</ion-label>
      <ion-label item-end style="font-size:65%;text-align:right;">{{item.amount_total}}</ion-label>
    </ion-item>
  </ion-item-group>

  <ion-item-group *ngFor='let item_detail of item.order_line;'>
    <ion-item-divider color="light" *ngIf="item_detail.pack_id != -1"></ion-item-divider>
    <ion-grid style="border-bottom: 1px solid lightgray;">
      <ion-row style="height:44px;">
        <ion-col col-auto>
        </ion-col>
        <ion-col>
          <ion-label text-wrap>{{item_detail.name}}</ion-label>
        </ion-col>
      </ion-row>

    </ion-grid>
    <ion-item style="margin-top:10px" no-lines *ngIf="item_detail.pack_id != -1">
      <ion-label item-start style="font-size:75%">国内简称： {{item_detail.inner_spec}}</ion-label>
      <ion-label item-end style="font-size:75%">订购 {{item_detail.qty}} *{{item_detail.price_unit}}</ion-label>
    </ion-item>
    <ion-item no-lines>
      <ion-label item-end style="font-size:75%">国内型号：{{item_detail.inner_code}}</ion-label>
      <ion-label item-end style="font-size:75%" *ngIf="type=='salesOrder'">已收货 {{item_detail.qty_delivered}} *{{item_detail.price_unit}}</ion-label>
    </ion-item>
    <ion-item no-lines>
      <ion-label item-start style="font-size:75%">计量单位 ：{{item_detail.uom}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label item-end style="font-size:75%">小计 {{item_detail.qty_delivered}}</ion-label>
      <ion-label item-end style="font-size:75%" *ngIf="type=='salesOrder'">已开票 {{(item_detail.qty_invoiced)*(item_detail.price_unit)}}</ion-label>
    </ion-item>
  </ion-item-group>
</ion-content>

<ion-footer>
    <ion-toolbar  >
        <button ion-button ion-start style='width:48%' tappable (click)='cancelOrder()'> 取消订单 </button>
         <button ion-button  ion-end style='width:48%' tappable (click)='createInvoice()'> 创建发票</button> 
         <button ion-button  ion-end style='width:48%' tappable (click)='conformSales()'> 确认销售</button> 
         
      </ion-toolbar>
</ion-footer>
