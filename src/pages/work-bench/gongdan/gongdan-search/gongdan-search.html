<!--
  Generated template for the GongdanSearchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<!--<ion-header>

  <ion-navbar color="gongdan-color">
    <ion-title>工单搜索</ion-title>
    
  </ion-navbar>

</ion-header>-->


<ion-content style="background:#f0f2f5">
  <div align="center" style="background:#2597ec;">
    <ion-auto-complete style="width: 80vw;margin-left:3vw" (itemSelected) = "itemSelected($event)"  [dataProvider]="gongDanAutoService"></ion-auto-complete>
    <p style="margin-right:16px;color:white;float:right"  tappable (click)="clickback()">取消</p>
  </div>
    <div *ngIf="(unacceptTitle + processTitle + unassignTitle).length > 9 || dataList.length || has_data > 0" style="height:40px;width:100%;background:white;">
      
      <img src= "assets/img/gongdan/rili.png" height="18px" width="18px" style="margin-left:10px;margin-top:11px;float:left">
      <p style="float:left;margin-left:10px;line-height:14px;color:gray">
        <span tappable (click)="chooseStartDate_gongdan()">{{startDate_gongdan + " - "}}</span><span tappable (click)="chooseEndDate_gongdan()">{{endDate_gongdan}}</span>   
      </p>
       <img src= "assets/img/work_bench/shaixuan.png" height="18px" width="18px" style="margin-right:-35px;margin-top:11px;float:right" tappable (click)="clickMenu()">
      <p tappable (click)="clickMenu()" style="float:right;margin-top:10px;color:gray;margin-right:-12px;border-left:#f0f2f5 1px solid;width:40px;text-align:right">筛选</p>
    </div>   
    <ion-item *ngIf="(unacceptTitle + processTitle + unassignTitle).length > 9 || dataList.length || has_data > 0" align="center" no-lines style="margin-top:10px;height:40px;min-height:40px;border-bottom:#f0f2f5 1px solid;width:101%;margin-left:-2px;margin-right:-4px;">

  <ion-grid  style="background-color:white;">
      <ion-row class="row_class" align-items-center>
        <ion-col tappable (click) = "click_all()">
        <div align="center" >
          <p [ngClass]="{true:'under_line_style',false:'normal_style'}[inner_type == 'all']">全部</p> 
        </div>
      </ion-col>
      <ion-col tappable (click) = "click_one()">
         <div align="center" >
          <p [ngClass]="{true:'under_line_style',false:'normal_style'}[inner_type == 'first']">{{unacceptTitle}}</p>
        </div>
      </ion-col>
      <ion-col tappable (click) = "click_two()">
        <div align="center">
          <p [ngClass]="{true:'under_line_style',false:'normal_style'}[inner_type == 'second']">{{processTitle}}</p>
        </div>
      </ion-col>
      <ion-col tappable (click) = "click_three()">
        <div align="center" >
          <p [ngClass]="{true:'under_line_style',false:'normal_style'}[inner_type == 'third']">{{unassignTitle}}</p> 
        </div>
      </ion-col>
      
      </ion-row>
    </ion-grid>
    </ion-item>

    <ion-item-group no-lines class="item_group_class" >
      <div *ngFor="let item of dataList" style="margin-top:10px;background-color:white" tappable (click)="gongdanDetail(item)">
        <div>
          <img *ngIf="item.priority == 1" src="assets/img/work_bench/up_one.png" class="priority_icon">
          <img *ngIf="item.priority == 2" src="assets/img/work_bench/up_two.png" class="priority_icon">
          <img *ngIf="item.priority == 3" src="assets/img/work_bench/up_three.png" class="priority_icon">
          <span class="title_class_style">
            {{item.title}}
          </span>
          <span p class="data_list_state">
            {{changeState(item.issue_state)}}
          </span>
        </div>
        <P text-wrap class="data_list_desprition">
          {{item.description}}
        </P>
        <ion-grid *ngIf="item.work_order_images" style="margin-top:-20px;margin-left:5px">
          <ion-row style="margin-right:5px;">
            <ion-col *ngFor="let image of item.work_order_images" col-3>
              <img src={{image}}>

            </ion-col>
          </ion-row>
        </ion-grid>
        <div class="creater_div">
          <img src={{item.create_user.user_ava}} class="create_ava">
          <span p class="creater_name">
            {{item.create_user.name + " " +item.create_time}}
          </span>
          <span *ngIf="!item.assign_user.name" class="assign_name">未指派受理人</span>
          <span *ngIf="item.assign_user.name" class="assign_name">
            {{"受理人： "+ item.assign_user.name}}
          </span>
          <img *ngIf="item.assign_user.name" src="assets/img/work_bench/lianjie.png" class="assign_ava">
        </div>
        <div style="height:1px;background:white">
        </div>
      </div>
    </ion-item-group>
</ion-content>
