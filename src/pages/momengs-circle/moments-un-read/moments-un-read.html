<!--
  Generated template for the MomentsUnReadPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar color="gongdan-color" hideBackButton="true">
        <ion-buttons left>
            <button ion-button icon-only (click)="goBack()">
              <ion-icon ios="ios-arrow-back" md="md-arrow-back"></ion-icon>
            </button>
        </ion-buttons>
    <ion-title>消息</ion-title>
    <ion-buttons right>
        <button ion-button icon-only tappable (click)="readAll()" style="font-size:14px;color: white;margin-right: 10px">
                  全部已读
              </button>
      </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content>
    <div *ngFor="let items of item" tappable (click)="gotoDeatil(items)" class="div_message">
        <ion-item no-lines style="height:40px;min-height:50px">
          <ion-grid style="background:white">
            <ion-row>
              <ion-col col-2>
                <img src={{items.create_user_ava}} class="img_message_ava">
              </ion-col>
              <ion-col col-7>
                <p class="name_message">
                  <span>{{items.create_uid}}</span><span style="margin-left:10px">{{changeDate(items.create_date) | date:'MM-dd HH:mm'}}</span>
                </p>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-item no-lines style="margin-top:-8px">
          <p text-wrap class="content_message_no_lines">
            <span>{{items.context}}</span>
          </p>
        </ion-item>
  
        <ion-grid class="parent_class"  *ngIf='items.creater && items.content'>
            <ion-row>
              <ion-col col-9 style="padding: 0px">
                  <p class="context_p_class" >{{items.creater}}： {{items.content}}</p>
              </ion-col>
              <ion-col col-2 *ngIf='items.attachments.length>0' style="padding: 0px">
                  <img src={{items.attachments[0]}}  style="float: right;width: 30px;height: 30px;margin-right: 15px;margin-top: 10px">
                </ion-col>
            </ion-row>
        </ion-grid>
        <ion-grid class="parent_class"  *ngIf='items.reply_context'>
            <ion-row>
              <ion-col col-9 style="padding: 0px">
                  <p class="context_p_class" >{{items.reply_name}}： {{items.reply_context}}</p>
              </ion-col>
              <ion-col col-2 *ngIf='items.attachments.length>0' style="padding: 0px">
                  <img src={{items.attachments[0]}}  style="float: right;width: 30px;height: 30px;margin-right: 15px;margin-top: 10px">
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>
</ion-content>
