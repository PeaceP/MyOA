{"version":3,"sources":["../../src/pages/email/email-detail/email-detail.ts","../../src/pages/email/email-detail/email-detail.module.ts","webpack:///./src/pages/email/emailService.ts?e344**"],"names":[],"mappings":"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","file":"118.js","sourcesContent":["import { Utils } from './../../../providers/Utils';\nimport { HttpService } from './../../../providers/HttpService';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { EmailService } from './../emailService';\nimport { NavParams } from 'ionic-angular/navigation/nav-params';\nimport { NavController, IonicPage } from 'ionic-angular';\nimport { Component } from '@angular/core';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\nimport { FileOpener } from '@ionic-native/file-opener';\n\n/**\n * Generated class for the EmailDetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-email-detail',\n  templateUrl: 'email-detail.html',\n  providers: [EmailService,File,FileTransfer,FileOpener]\n})\nexport class EmailDetailPage {\n  id;\n  email_detail;\n  body_html;\n  subject;\n  email_from;\n  EmailPage;\n  email_to; date; attachment_list = [];email_cc;email_bcc\n  constructor(private sanitizer: DomSanitizer,\n    public transfer: FileTransfer,\n    public file: File,\n    public fileOpener: FileOpener,\n    public navCtrl: NavController, public navParams: NavParams, public emailService: EmailService) {\n    this.id = this.navParams.get('id')\n    this.EmailPage = Utils.getViewController(\"EmailPage\", this.navCtrl)\n    this.emailService.get_email_detail(this.id).then(res => {\n      console.log(res.result.res_data)\n      this.email_detail = res.result.res_data\n      this.body_html = this.email_detail.body_html\n      this.subject = this.email_detail.subject\n      this.email_from = this.email_detail.email_from\n      this.email_to = this.email_detail.email_to\n      this.email_cc = this.email_detail.email_cc\n      this.email_bcc = this.email_detail.email_bcc\n      this.date = this.email_detail.date\n      this.attachment_list = this.transAttachUrl(this.email_detail.attachment_list)\n      console.log(this.attachment_list)\n    })\n  }\n\n\n  transAttachUrl(attachment_list) {\n    for (let i = 0; i < attachment_list.length; i++) {\n      let icon_src = \"assets/img/attach_icon/attachment_icon.jpeg\"\n      if (attachment_list[i].mimetype.indexOf('jpeg') > 0) {\n        icon_src = \"assets/img/attach_icon/jpg.png\"\n      } else if (attachment_list[i].mimetype.indexOf('excel') > 0) {\n        icon_src = \"assets/img/attach_icon/xls.png\"\n        // preview_str = ''\n      } else if (attachment_list[i].mimetype.indexOf('png') > 0) {\n        icon_src = \"assets/img/attach_icon/png.png\"\n      } else if (attachment_list[i].mimetype.indexOf('pdf') > 0) {\n        icon_src = \"assets/img/attach_icon/pdf.png\"\n      } else if (attachment_list[i].mimetype.indexOf('video') > 0) {\n        icon_src = \"assets/img/attach_icon/video.png\"\n      } else if (attachment_list[i].mimetype.indexOf('gif') > 0) {\n        icon_src = \"assets/img/attach_icon/gif.png\"\n      }\n      attachment_list[i].icon_src = icon_src\n    }\n    return attachment_list\n  }\n\n\n\n  assembleHTML(strHTML) {\n    return this.sanitizer.bypassSecurityTrustHtml(strHTML);\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad EmailDetailPage');\n  }\n\n\n  clickAttach(id, mimeType) {\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    const url = HttpService.appUrl+\"web/content/\"+id+\"?download=true\";\n    fileTransfer.download(url, this.file.dataDirectory + id).then((entry) => {\n      console.log('download complete: ' + entry.toURL());\n      this.fileOpener.open(entry.nativeURL, mimeType)\n        .then(() => {\n          console.log('打开成功');\n        })\n        .catch(() => {\n          console.log('打开失败');\n        });\n    }, (error) => {\n      console.log(error)\n    });\n  }\n\n  goBack(){\n    this.navCtrl.pop()\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email/email-detail/email-detail.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EmailDetailPage } from './email-detail';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\n\nimport { FileOpener } from '@ionic-native/file-opener';\n\n@NgModule({\n  declarations: [\n    EmailDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EmailDetailPage)\n  ],\n})\nexport class EmailDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email/email-detail/email-detail.module.ts","import { HttpService } from './../../providers/HttpService';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class EmailService {\n    constructor(private httpService: HttpService) {\n\n    }\n\n    getAccountDetail(user_id) {\n        let body = JSON.stringify({\n            'uid': user_id,\n        });\n        return this.httpService.postBody('get_account_detail', body);\n    }\n\n    uploadAttachment(user_id,filename,data) {\n        let body = JSON.stringify({\n            'uid': user_id,\n            'name':filename,\n            'datas':data,\n        });\n        return this.httpService.postBody('rt_mail/upload_attachment', body, 2);\n    }\n\n    delete_attachment(id){\n        let body = JSON.stringify({\n            'id': id,\n        });\n        return this.httpService.postBodyNoLoading('rt_mail/delete_attachment', body, 2);\n    }\n\n\n    getEmailList(user_id, account_id, email_type, state_type,data_id, limit, offset) {\n        let body = JSON.stringify({\n            'uid': user_id,\n            'account_id': account_id,\n            'email_type': email_type,\n            'state_type': state_type,\n            'data_id':data_id,\n            'limit': limit,\n            'offset': offset\n        });\n        return this.httpService.postBody('get_email_list', body);\n    }\n\n    get_email_detail(id) {\n        let body = JSON.stringify({\n            'id': id\n        });\n        return this.httpService.postBody('rt_mail/get_email_detail', body, 2);\n    }\n\n\n    get_email_label_folder(account_id,user_id){\n        let body = JSON.stringify({\n            'account_id': account_id,\n            'uid':user_id\n        });\n        return this.httpService.postBodyNoLoading('rt_mail/get_email_label_folder', body, 2);\n    }\n\n\n    send_mail(user_id,account_id,email_to,email_cc,email_bcc,subject,body,attach_list,draft){\n        let send_body = JSON.stringify({\n            'uid':user_id,\n            'account_id':account_id,\n            'email_to': email_to,\n            'email_cc':email_cc,\n            'email_bcc':email_bcc,\n            'subject':subject,\n            \"body_html\":body,\n            'attachment_ids':attach_list,\n            'draft':draft\n        });\n        return this.httpService.postBodyNoLoading('rt_mail/email_sent', send_body, 2);\n\n    }\n\n\n    get_contact_list(uid){\n        let body = JSON.stringify({\n            'uid':uid,\n        });\n        return this.httpService.postBodyNoLoading('rt_mail/get_contact_list', body, 2);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email/emailService.ts"],"sourceRoot":""}