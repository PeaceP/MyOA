{"version":3,"sources":["../../src/pages/add-employee/prompt/gongpai/gongpai.ts","../../src/pages/add-employee/prompt/gongpai/gongpai.module.ts","webpack:///./src/pages/add-employee/EmployeeService.ts?ff66****"],"names":[],"mappings":"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","file":"131.js","sourcesContent":["import { ToastController } from 'ionic-angular/components/toast/toast-controller';\nimport { HttpService } from './../../../../providers/HttpService';\nimport { Utils } from './../../../../providers/Utils';\nimport { EmployeeService } from './../../EmployeeService';\nimport { IonicPage } from 'ionic-angular/navigation/ionic-page';\nimport { NavController, NavParams, ModalController } from 'ionic-angular';\nimport { Component } from '@angular/core';\nimport { NFC, Ndef } from '@ionic-native/nfc';\n\n/**\n * Generated class for the GongpaiPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-gongpai',\n  templateUrl: 'gongpai.html',\n  providers: [EmployeeService]\n})\n\nexport class GongpaiPage {\n  isFinish = false;\n  isShowNotFind = false;\n  isShowFail = false\n  item;\n  isFindNFC = false;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public nfc: NFC,\n    public modalCtrl: ModalController,\n    public toast: ToastController,\n    public employeeService: EmployeeService, ) {\n    this.item = this.navParams.get(\"item\")\n    this.startNFC();\n\n  }\n\n\n  startNFC() {\n    this.nfc.addTagDiscoveredListener(() => {\n      console.log(\"开启nfc成功\")\n      this.startFindTimer();\n    }, (err) => {\n      Utils.toastButtom(\"激活nfc失败\", this.toast)\n    }).subscribe((event) => {\n      let NFC_id = this.nfc.bytesToHexString(event.tag.id)\n      if (NFC_id) {\n        this.isFindNFC = true\n      }\n      let upDate_item = {\n        id: this.item.id,\n        // id: 255,\n        edit_id: HttpService.user_id,\n        card_num: NFC_id,\n      }\n      this.startRequestTimer();\n      this.employeeService.update_nfc_number(upDate_item).then(res => {\n        console.log(res)\n        if (res.result && res.result.res_code == 1) {\n          // Utils.toastButtom(\"绑定成功\", this.toast)\n          this.isFinish = true\n        } else {\n          this.isShowFail = true\n        }\n      })\n    })\n  }\n\n\n  startFindTimer() {\n    let that = this;\n    let timer = self.setTimeout(function () {\n      if (!that.isFindNFC) {\n        that.isShowNotFind = true\n        console.log(\"this.isShowNotFind = true\")\n      }\n    }, 5000)\n  }\n\n\n  startRequestTimer() {\n    let that = this;\n    let timer = self.setTimeout(function () {\n      if (!that.isFinish) {\n        that.isShowFail = true\n      }\n    }, 5000)\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad GongpaiPage');\n  }\n\n\n\n\n  goBack() {\n    this.navCtrl.pop()\n  }\n\n  finish() {\n    this.navCtrl.pop()\n  }\n\n  clickCancel() {\n    this.isShowFail = false\n    this.isShowNotFind = false\n    this.isFinish = false\n    this.startNFC();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-employee/prompt/gongpai/gongpai.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GongpaiPage } from './gongpai';\n\n@NgModule({\n  declarations: [\n    GongpaiPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GongpaiPage),\n  ],\n})\nexport class GongpaiPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-employee/prompt/gongpai/gongpai.module.ts","import { HttpService } from './../../providers/HttpService';\nimport { Injectable } from '@angular/core';\n\n\n@Injectable()\nexport class EmployeeService {\n    constructor(private httpservice: HttpService) {\n\n    }\n\n    get_all_department(){\n\n        let body = JSON.stringify({\n          \n        });\n        return this.httpservice.postBodyNoLoading(\"get_all_department\", body);\n\n    }\n\n\n\n    // 获取民族\n    get_employee_list() {\n        let body = JSON.stringify({\n          \n        });\n        return this.httpservice.postBodyNoLoading(\"get_employee_list\", body);\n    }\n\n\n    getDepartmentNoLoading(){\n        let body = JSON.stringify({\n            partner_id:1\n          });\n        return this.httpservice.postBodyNoLoading(\"get_all_departments\", body);\n    }\n\n\n    create_employee(data){\n        let body = JSON.stringify(data);\n        return this.httpservice.postBody(\"create_employee\", body);\n    }\n\n    get_employee_info(id_list,is_all){\n        let body = JSON.stringify({\n            id_list:id_list,\n            is_all:is_all\n        });\n        return this.httpservice.postBodyNoLoading(\"get_employee_info\", body);\n    }\n\n    update_employee(data){\n        let body = JSON.stringify(data);\n        return this.httpservice.postBody(\"update_employee\", body);\n    }\n\n\n    update_nfc_number(data){\n        let body = JSON.stringify(data);\n        return this.httpservice.postBody(\"update_nfc_number\", body);\n    }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-employee/EmployeeService.ts"],"sourceRoot":""}